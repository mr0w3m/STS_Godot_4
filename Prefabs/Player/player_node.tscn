[gd_scene load_steps=28 format=3 uid="uid://qj8prtnly8lf"]

[ext_resource type="Script" uid="uid://ltx1plrrwijj" path="res://Scripts/Player/PlayerNode.cs" id="1_ydqg4"]
[ext_resource type="AudioStream" uid="uid://b634ah23j0teo" path="res://Audio/SFX/WalkLoop1_1Step.mp3" id="2_a2cyr"]
[ext_resource type="PhysicsMaterial" uid="uid://6lx4cki5depb" path="res://PhysicsMaterials/PhysMat_Player.tres" id="2_cqeso"]
[ext_resource type="AudioStream" uid="uid://cdvu4o54bonjm" path="res://Audio/SFX/PlayerHurt.mp3" id="2_kjmbk"]
[ext_resource type="Script" uid="uid://scx6ad6w24sk" path="res://Scripts/Player/Movement.cs" id="3_0jkn5"]
[ext_resource type="Script" uid="uid://ccrbcuno5duxy" path="res://Scripts/Player/DirectionFlipper.cs" id="4_yi70h"]
[ext_resource type="SpriteFrames" uid="uid://crcb8l4oq4iut" path="res://Animations/Player/PlayerAnimator_SpriteFrames.tres" id="5_cqeso"]
[ext_resource type="Script" uid="uid://ba52jyollp3b6" path="res://Scripts/Other/AnimController.cs" id="6_0jkn5"]
[ext_resource type="Texture2D" uid="uid://jkir0f7r11rf" path="res://Sprites/StarFriends/StarBoi.png" id="7_l6di8"]
[ext_resource type="Script" uid="uid://cvdsbfo0bcw80" path="res://Scripts/Player/Stars.cs" id="8_kjmbk"]
[ext_resource type="PackedScene" uid="uid://cjbptn61pwa6x" path="res://Prefabs/Projectiles/Stars/StarProjectile_Rigidbody3D.tscn" id="9_a2cyr"]
[ext_resource type="Texture2D" uid="uid://be8yce5elh3l8" path="res://Sprites/Environment/Untitled_Artwork(30).png" id="9_ti2d1"]
[ext_resource type="Script" uid="uid://bkqyvqcelxbxo" path="res://Scripts/Player/Health.cs" id="10_c2ywu"]
[ext_resource type="AudioStream" uid="uid://mnv5ik8j2a7w" path="res://Audio/SFX/StarAttack.mp3" id="11_l6di8"]
[ext_resource type="Script" uid="uid://dmjhtduryblmc" path="res://Scripts/UI/UI_Health.cs" id="11_yi70h"]
[ext_resource type="PackedScene" uid="uid://km5kfernh2aw" path="res://Prefabs/StarFriends/sprite_3d_star_f_1.tscn" id="12_0t26k"]
[ext_resource type="PackedScene" uid="uid://cqhgipwu12yiq" path="res://Prefabs/UI/Health/ui_hp_texture_rect_prefab.tscn" id="12_7kaws"]
[ext_resource type="PackedScene" uid="uid://cgbcacvphyg7n" path="res://Prefabs/StarFriends/sprite_3d_star_f_2.tscn" id="13_uqmph"]
[ext_resource type="Script" uid="uid://c22sl6uxuh6mw" path="res://Scripts/UI/PlayerDeathUI.cs" id="13_vc4si"]
[ext_resource type="PackedScene" uid="uid://dngld4r2ei2je" path="res://Prefabs/StarFriends/sprite_3d_star_f_3.tscn" id="14_4viyg"]
[ext_resource type="Script" uid="uid://ctaa2fhixinad" path="res://Scripts/UI/UI_ConvoView.cs" id="15_vc4si"]
[ext_resource type="Texture2D" uid="uid://hjsx7f21kaje" path="res://Sprites/StarFriends/StarGotBackground.png" id="19_c2ywu"]
[ext_resource type="Script" uid="uid://lwidph6jhrfk" path="res://Scripts/UI/NewStarPowerListener.cs" id="19_ti2d1"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_x6d61"]
transparency = 1
albedo_color = Color(0, 0, 0, 1)
albedo_texture = ExtResource("9_ti2d1")
texture_filter = 0

[sub_resource type="QuadMesh" id="QuadMesh_irfb3"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_i8b7g"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_a2cyr"]
radius = 0.3
height = 1.0

[node name="PlayerNode" type="Node3D" node_paths=PackedStringArray("movement", "stars", "health", "animController")]
script = ExtResource("1_ydqg4")
movement = NodePath("Player_RigidBody3D")
stars = NodePath("Player_RigidBody3D/PlayerStars")
health = NodePath("Player_RigidBody3D/PlayerHP")
_walkingClip = ExtResource("2_a2cyr")
_playerHurtSFX = ExtResource("2_kjmbk")
animController = NodePath("Player_RigidBody3D/SpriteParentAndDirectionFlipper/PrimaryAnimatedSprite3D")

[node name="Player_RigidBody3D" type="RigidBody3D" parent="." groups=["Player"]]
axis_lock_angular_x = true
axis_lock_angular_y = true
axis_lock_angular_z = true
physics_material_override = ExtResource("2_cqeso")
script = ExtResource("3_0jkn5")
_moveSpeed = 200.0

[node name="SpriteParentAndDirectionFlipper" type="Node3D" parent="Player_RigidBody3D" node_paths=PackedStringArray("_movement")]
transform = Transform3D(0.99999994, 0, 0, 0, 1, 0, 0, 0, 0.99999994, 0, 0, 0)
script = ExtResource("4_yi70h")
_movement = NodePath("..")

[node name="PrimaryAnimatedSprite3D" type="AnimatedSprite3D" parent="Player_RigidBody3D/SpriteParentAndDirectionFlipper"]
transform = Transform3D(-0.9999997, 0, -2.980232e-08, 0, 1, 0, 2.980232e-08, 0, -0.9999997, 0, 0.49002218, 0)
pixel_size = 0.002
sprite_frames = ExtResource("5_cqeso")
animation = &"IdleAnim"
autoplay = "IdleAnim"
script = ExtResource("6_0jkn5")

[node name="PlayerGroundSprite" type="MeshInstance3D" parent="Player_RigidBody3D/SpriteParentAndDirectionFlipper"]
transform = Transform3D(0.6, 0, 0, 0, -4.371139e-08, 1, 0, -1, -4.371139e-08, 0, 0.011627505, -0.115)
material_override = SubResource("StandardMaterial3D_x6d61")
mesh = SubResource("QuadMesh_irfb3")
skeleton = NodePath("../../../..")

[node name="ProjectileSpawnTransform_Node3D" type="Node3D" parent="Player_RigidBody3D/SpriteParentAndDirectionFlipper"]
transform = Transform3D(-4.371139e-08, -0.7071067, -0.7071067, 0, 0.7071067, -0.7071067, 1, -3.0908616e-08, -3.0908616e-08, 0, 3, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player_RigidBody3D"]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0.0016283989, 0.49999994, 0.0020656586)
shape = SubResource("CapsuleShape3D_i8b7g")
debug_color = Color(0.85882354, 0.3254902, 0.42745098, 0.94509804)

[node name="CameraYaw" type="Node3D" parent="Player_RigidBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.72543514, 0)

[node name="CameraPitch" type="Node3D" parent="Player_RigidBody3D/CameraYaw"]
transform = Transform3D(1, 0, 0, 0, 0.9659258, -0.25881904, 0, 0.25881904, 0.9659258, 0, 0, 0)

[node name="CameraRoll" type="Node3D" parent="Player_RigidBody3D/CameraYaw/CameraPitch"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -3.5)

[node name="Camera3D" type="Camera3D" parent="Player_RigidBody3D/CameraYaw/CameraPitch/CameraRoll"]
transform = Transform3D(-1, 0, -8.7422784e-08, 0, 1.0000001, 0, 8.742278e-08, 0, -1.0000001, 0, 0, 0)
fov = 60.0

[node name="StarFriendParent" type="Node3D" parent="Player_RigidBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.5235833, 0.81331253, 0)

[node name="StarFriend1ParentNode3D" type="Node3D" parent="Player_RigidBody3D/StarFriendParent"]
transform = Transform3D(-0.5, 0, 7.54979e-08, 0, 0.5, 0, -7.54979e-08, 0, -0.5, 0.18148434, 0.5103493, 0.29154745)

[node name="StarFriend2ParentNode3D" type="Node3D" parent="Player_RigidBody3D/StarFriendParent"]
transform = Transform3D(-0.5, 0, 7.54979e-08, 0, 0.5, 0, -7.54979e-08, 0, -0.5, -0.58229923, 0.5103493, 0.29154733)

[node name="StarFriend3ParentNode3D" type="Node3D" parent="Player_RigidBody3D/StarFriendParent"]
transform = Transform3D(-0.5, 0, 7.54979e-08, 0, 0.5, 0, -7.54979e-08, 0, -0.5, -0.17127502, 0.9637084, 0.29154742)

[node name="PlayerStars" type="Node3D" parent="Player_RigidBody3D" node_paths=PackedStringArray("_projectileLaunchPos", "_starFriendPosition_star1", "_starFriendPosition_star2", "_starFriendPosition_star3")]
script = ExtResource("8_kjmbk")
_projectileLaunchPos = NodePath("../SpriteParentAndDirectionFlipper/ProjectileSpawnTransform_Node3D")
_starProjectilePrefab = ExtResource("9_a2cyr")
_starFriend_star1 = ExtResource("12_0t26k")
_starFriend_star2 = ExtResource("13_uqmph")
_starFriend_star3 = ExtResource("14_4viyg")
_starFriendPosition_star1 = NodePath("../StarFriendParent/StarFriend1ParentNode3D")
_starFriendPosition_star2 = NodePath("../StarFriendParent/StarFriend2ParentNode3D")
_starFriendPosition_star3 = NodePath("../StarFriendParent/StarFriend3ParentNode3D")
_starClip = ExtResource("11_l6di8")

[node name="PlayerHP" type="Node" parent="Player_RigidBody3D"]
script = ExtResource("10_c2ywu")
_startingHP = 5

[node name="PlayerTriggerCheckArea3D" type="Area3D" parent="Player_RigidBody3D" groups=["Player"]]
collision_layer = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player_RigidBody3D/PlayerTriggerCheckArea3D" groups=["Player"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5, 0)
shape = SubResource("CapsuleShape3D_a2cyr")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="UIHP_Control" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/UIHP_Control" node_paths=PackedStringArray("_health")]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0
script = ExtResource("11_yi70h")
_health = NodePath("../../../Player_RigidBody3D/PlayerHP")
_uiHPPrefab = ExtResource("12_7kaws")

[node name="UIDeathText_Control2" type="Control" parent="CanvasLayer" node_paths=PackedStringArray("_health")]
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("13_vc4si")
_health = NodePath("../../Player_RigidBody3D/PlayerHP")

[node name="Panel" type="Panel" parent="CanvasLayer/UIDeathText_Control2"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="RichTextLabel" type="RichTextLabel" parent="CanvasLayer/UIDeathText_Control2"]
clip_contents = false
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -274.0
offset_top = -100.0
offset_right = 274.0
offset_bottom = 100.0
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/normal_font_size = 72
text = "You Died!"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Conversation_Control3" type="Control" parent="CanvasLayer" node_paths=PackedStringArray("_speakerText", "_dialogueText")]
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("15_vc4si")
_speakerText = NodePath("Panel/Panel2/Speaker_RichTextLabel")
_dialogueText = NodePath("Panel/Words_RichTextLabel")

[node name="Panel" type="Panel" parent="CanvasLayer/Conversation_Control3"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -437.0
offset_top = -151.0
offset_right = 437.0
offset_bottom = -31.0
grow_horizontal = 2
grow_vertical = 0

[node name="Panel2" type="Panel" parent="CanvasLayer/Conversation_Control3/Panel"]
layout_mode = 1
offset_top = -69.0
offset_right = 300.0
offset_bottom = -19.0

[node name="Speaker_RichTextLabel" type="RichTextLabel" parent="CanvasLayer/Conversation_Control3/Panel/Panel2"]
clip_contents = false
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/normal_font_size = 28
theme_override_font_sizes/bold_font_size = 28
text = "Sky Mother"
autowrap_mode = 0
horizontal_alignment = 1
vertical_alignment = 1

[node name="Words_RichTextLabel" type="RichTextLabel" parent="CanvasLayer/Conversation_Control3/Panel"]
layout_mode = 1
anchors_preset = -1
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 28.0
offset_right = -28.0
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/normal_font_size = 28
text = "Here's some text for conversation. It's important to be able to read this from afar."
vertical_alignment = 1

[node name="GetStarUI" type="Control" parent="CanvasLayer" node_paths=PackedStringArray("_stars")]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("19_ti2d1")
_stars = NodePath("../../Player_RigidBody3D/PlayerStars")

[node name="Words_RichTextLabel" type="RichTextLabel" parent="CanvasLayer/GetStarUI"]
custom_minimum_size = Vector2(400, 400)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -0.5
offset_right = 0.5
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/normal_font_size = 28
text = "You got a new Star Power!"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Control" type="Control" parent="CanvasLayer/GetStarUI"]
anchors_preset = 0
offset_left = 476.0
offset_top = 106.0
offset_right = 516.0
offset_bottom = 146.0

[node name="TextureRect2" type="TextureRect" parent="CanvasLayer/GetStarUI/Control"]
custom_minimum_size = Vector2(200, 200)
layout_mode = 1
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -20.0
offset_right = 180.0
offset_bottom = 200.0
grow_horizontal = 2
texture = ExtResource("19_c2ywu")
expand_mode = 1

[node name="TextureRect" type="TextureRect" parent="CanvasLayer/GetStarUI"]
custom_minimum_size = Vector2(100, 100)
layout_mode = 1
anchors_preset = 5
anchor_left = 0.5
anchor_right = 0.5
offset_left = -50.0
offset_top = 156.0
offset_right = 50.0
offset_bottom = 256.0
grow_horizontal = 2
texture = ExtResource("7_l6di8")
expand_mode = 1
